##########################################################################
#
# WARNING: This file was generated by update.php.
#
# You can find the relevant template in the `/templates` folder.
#

if: tag IS blank

language: generic

services:
  - docker

branches:
  only:
    - master

env:
  global:
    - DOCKER_USERNAME: garypendergast
    - GITHUB_USERNAME: desrosj
    # DOCKER_PASSWORD
    - secure: XM3hZ+2t+v5tZ2mX5vEc/keczuTRCu2dTWhxclkMquEUkjNJiIjFEBGd5eYFdYoXiz/+eW8f7nPJy4MFO5k9tHUfBWPv2+eLZEU8FxjAFE2rEJ2nlN2IABuaiKAOZKBWmL7EV5G+BHxJqhinNLK+sOP74WrqIlTngidIRC4Xaf8Mhqt8BH2UiryBPoMJcYEO9pmYacSnDQBTb98qMJyZIdR+Jc+5oaqob5luRXRjBYWtKR6vv7z360a23Hl/kIiwK1fA0NGAZ5JYzg4LW6F+zmv+8DxrelNpymiTVGPF8rNrNynPQ/G9VCZfc03BJHbGlCyAjPSS10OHD4iBrKY6yyVuFc5Vi1Sj1Jci5UTo6S8HSMRKYksI6F0mC/Tz+kke7QAwlcRwcTB84HE/FZhu6IfVh0DsbiJI60t8DBIPGKKhEZ1bYpZu4XCEw6UE0ejUfXu8dN4dt7Hp7MhlRU4e67BtOAvgRMSvba8ucQ4eN1dWBC+jqjzkdynFkiKh/IDitS2Fuk0FnrRmgihNr+Rhige6RoDe31cr/fVQeiKkvRjVmQzWDXcWk8LISqUsy7rsfLoJ3+Oes2s9DtxDEBWt8GK3CNe7VDYwbPqdhZ+aeGhlftE14ijMCTxEiEmqYtmgiuepIZV/tTDR45652vAlR2j6xqpHFRnIMoXPd0QaLwM=
    # GITHUB_TOKEN
    - secure: bsDfhvV/fOOodye17xN1sbWnkSasBjOc02YPAPX0WKuTygKpXa8xHqjILnv9CH9tFcR9+RsoS5Ra5af8YPXQpc6rcJpPvpFIPq7/uiEmB1G9f6xacRQWgasDXR0AXZfXqwjkxLueVFaWr512w3DoFf8ZDQvv530sG6y8t3KTyBsNS5wh/VovWAp+nNOLGMw2sq77Tzqw5C1Ou4gJ6fLsVThUg3FoTSYmeM/BYFggUamWa3fCCFjEFGbD1+US+JNA6o6pdneLvvi0tSpFRagh5eeu3/lk6daPvxAzOQWZzh0hvKVjr0v4w1u0VXkI+sFmBJh1N5wYK876AlmNZYZaJz+DQbXrO4pxRUuVrGPQRppagwU5EG4zTAi8p8L15+w6lgP0qGPpx/BJ8rffBfvAuFUeQoIBH+OBoKPgkUt7xzbEuAjTd2kuSdynn9E7SQhC1U9exRpMYvoPfLM2bgHpX0PuQbI1KF/ocee0hfIgQS1RWL1EQfxyaGsswJSYPcUrIl3WEmCZU8HNvN+jVWsps6Z1mUCb3LGlQoZNCQbjTyccQ/3FBz3P+v6vl5PeatXGMZiJUrcDUUxyRA+Nh/HWEXqzzvBWnN82j6cZihDv6dwqsxK17PUsFQsCcr8E2I58HdGotrFRErwSA7eBpuMItJoRKAtFK7G90n6LK+sXR1U=
    - PR_TAG: $(if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then echo "-$TRAVIS_PULL_REQUEST"; else echo ""; fi)
    - PACKAGE_REGISTRY_HOST: $(if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then echo "ghcr.io"; else echo ""; fi)
    - PACKAGE_REGISTRY: $(if [ "$PACKAGE_REGISTRY_HOST" != "" ]; then echo "${PACKAGE_REGISTRY_HOST}/wordpress/wpdev-docker-images"; else echo "wordpressdevelop"; fi)

before_script:
  - |
    if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then
      echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
    else
      echo "$GITHUB_TOKEN" | docker login ghcr.io -u "$GITHUB_USERNAME" --password-stdin
    fi

jobs:
  include:
    - stage: "Build PHP images"
      name: "php 5.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.2-fpm$PR_TAG images/5.2/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.2-fpm$PR_TAG
    - name: "php 5.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.3-fpm$PR_TAG images/5.3/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.3-fpm$PR_TAG
    - name: "php 5.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.4-fpm$PR_TAG images/5.4/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.4-fpm$PR_TAG
    - name: "php 5.5"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.5-fpm$PR_TAG images/5.5/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.5-fpm$PR_TAG
    - name: "php 5.6.20"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.6.20-fpm$PR_TAG images/5.6.20/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.6.20-fpm$PR_TAG
    - name: "php 5.6"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:5.6-fpm$PR_TAG images/5.6/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:5.6-fpm$PR_TAG
    - name: "php 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:7.0-fpm$PR_TAG images/7.0/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:7.0-fpm$PR_TAG
    - name: "php 7.1"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:7.1-fpm$PR_TAG images/7.1/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:7.1-fpm$PR_TAG
    - name: "php 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:7.2-fpm$PR_TAG images/7.2/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:7.2-fpm$PR_TAG
    - name: "php 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:7.3-fpm$PR_TAG images/7.3/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:7.3-fpm$PR_TAG
    - name: "php 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:7.4-fpm$PR_TAG -t $PACKAGE_REGISTRY/php:latest$PR_TAG images/7.4/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:7.4-fpm$PR_TAG
        - docker push $PACKAGE_REGISTRY/php:latest$PR_TAG
    - name: "php 8.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/php:8.0-fpm$PR_TAG images/8.0/php
        - docker images
        - docker push $PACKAGE_REGISTRY/php:8.0-fpm$PR_TAG

    - stage: "Build PHPUnit images"
      name: "phpunit 5.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.2-fpm$PR_TAG images/5.2/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.2-fpm$PR_TAG
    - name: "phpunit 5.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.3-fpm$PR_TAG images/5.3/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.3-fpm$PR_TAG
    - name: "phpunit 5.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.4-fpm$PR_TAG images/5.4/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.4-fpm$PR_TAG
    - name: "phpunit 5.5"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.5-fpm$PR_TAG images/5.5/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.5-fpm$PR_TAG
    - name: "phpunit 5.6.20"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.6.20-fpm$PR_TAG images/5.6.20/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.6.20-fpm$PR_TAG
    - name: "phpunit 5 on php 5.6.20"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5-php-5.6.20-fpm$PR_TAG images/phpunit/5-php-5.6.20
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5-php-5.6.20-fpm$PR_TAG
    - name: "phpunit 4 on php 5.6.20"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:4-php-5.6.20-fpm$PR_TAG images/phpunit/4-php-5.6.20
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:4-php-5.6.20-fpm$PR_TAG
    - name: "phpunit 5.6"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5.6-fpm$PR_TAG images/5.6/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5.6-fpm$PR_TAG
    - name: "phpunit 5 on php 5.6"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5-php-5.6-fpm$PR_TAG images/phpunit/5-php-5.6
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5-php-5.6-fpm$PR_TAG
    - name: "phpunit 4 on php 5.6"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:4-php-5.6-fpm$PR_TAG images/phpunit/4-php-5.6
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:4-php-5.6-fpm$PR_TAG
    - name: "phpunit 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7.0-fpm$PR_TAG images/7.0/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7.0-fpm$PR_TAG
    - name: "phpunit 7 on php 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7-php-7.0-fpm$PR_TAG images/phpunit/7-php-7.0
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7-php-7.0-fpm$PR_TAG
    - name: "phpunit 6 on php 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:6-php-7.0-fpm$PR_TAG images/phpunit/6-php-7.0
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:6-php-7.0-fpm$PR_TAG
    - name: "phpunit 5 on php 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:5-php-7.0-fpm$PR_TAG images/phpunit/5-php-7.0
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:5-php-7.0-fpm$PR_TAG
    - name: "phpunit 7.1"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7.1-fpm$PR_TAG images/7.1/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7.1-fpm$PR_TAG
    - name: "phpunit 7 on php 7.1"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7-php-7.1-fpm$PR_TAG images/phpunit/7-php-7.1
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7-php-7.1-fpm$PR_TAG
    - name: "phpunit 6 on php 7.1"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:6-php-7.1-fpm$PR_TAG images/phpunit/6-php-7.1
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:6-php-7.1-fpm$PR_TAG
    - name: "phpunit 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7.2-fpm$PR_TAG images/7.2/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7.2-fpm$PR_TAG
    - name: "phpunit 8 on php 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:8-php-7.2-fpm$PR_TAG images/phpunit/8-php-7.2
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:8-php-7.2-fpm$PR_TAG
    - name: "phpunit 7 on php 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7-php-7.2-fpm$PR_TAG images/phpunit/7-php-7.2
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7-php-7.2-fpm$PR_TAG
    - name: "phpunit 6 on php 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:6-php-7.2-fpm$PR_TAG images/phpunit/6-php-7.2
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:6-php-7.2-fpm$PR_TAG
    - name: "phpunit 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7.3-fpm$PR_TAG images/7.3/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7.3-fpm$PR_TAG
    - name: "phpunit 9 on php 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:9-php-7.3-fpm$PR_TAG images/phpunit/9-php-7.3
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:9-php-7.3-fpm$PR_TAG
    - name: "phpunit 8 on php 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:8-php-7.3-fpm$PR_TAG images/phpunit/8-php-7.3
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:8-php-7.3-fpm$PR_TAG
    - name: "phpunit 7 on php 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7-php-7.3-fpm$PR_TAG images/phpunit/7-php-7.3
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7-php-7.3-fpm$PR_TAG
    - name: "phpunit 6 on php 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:6-php-7.3-fpm$PR_TAG images/phpunit/6-php-7.3
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:6-php-7.3-fpm$PR_TAG
    - name: "phpunit 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7.4-fpm$PR_TAG -t $PACKAGE_REGISTRY/phpunit:latest$PR_TAG images/7.4/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7.4-fpm$PR_TAG
        - docker push $PACKAGE_REGISTRY/phpunit:latest$PR_TAG
    - name: "phpunit 9 on php 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:9-php-7.4-fpm$PR_TAG images/phpunit/9-php-7.4
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:9-php-7.4-fpm$PR_TAG
    - name: "phpunit 8 on php 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:8-php-7.4-fpm$PR_TAG images/phpunit/8-php-7.4
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:8-php-7.4-fpm$PR_TAG
    - name: "phpunit 7 on php 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:7-php-7.4-fpm$PR_TAG images/phpunit/7-php-7.4
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:7-php-7.4-fpm$PR_TAG
    - name: "phpunit 8.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:8.0-fpm$PR_TAG images/8.0/phpunit
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:8.0-fpm$PR_TAG
    - name: "phpunit 9 on php 8.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/phpunit:9-php-8.0-fpm$PR_TAG images/phpunit/9-php-8.0
        - docker images
        - docker push $PACKAGE_REGISTRY/phpunit:9-php-8.0-fpm$PR_TAG

    - stage: "Build CLI images"
      name: "cli 5.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.2-fpm$PR_TAG images/5.2/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.2-fpm$PR_TAG
    - name: "cli 5.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.3-fpm$PR_TAG images/5.3/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.3-fpm$PR_TAG
    - name: "cli 5.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.4-fpm$PR_TAG images/5.4/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.4-fpm$PR_TAG
    - name: "cli 5.5"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.5-fpm$PR_TAG images/5.5/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.5-fpm$PR_TAG
    - name: "cli 5.6.20"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.6.20-fpm$PR_TAG images/5.6.20/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.6.20-fpm$PR_TAG
    - name: "cli 5.6"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:5.6-fpm$PR_TAG images/5.6/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:5.6-fpm$PR_TAG
    - name: "cli 7.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:7.0-fpm$PR_TAG images/7.0/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:7.0-fpm$PR_TAG
    - name: "cli 7.1"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:7.1-fpm$PR_TAG images/7.1/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:7.1-fpm$PR_TAG
    - name: "cli 7.2"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:7.2-fpm$PR_TAG images/7.2/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:7.2-fpm$PR_TAG
    - name: "cli 7.3"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:7.3-fpm$PR_TAG images/7.3/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:7.3-fpm$PR_TAG
    - name: "cli 7.4"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:7.4-fpm$PR_TAG -t $PACKAGE_REGISTRY/cli:latest$PR_TAG images/7.4/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:7.4-fpm$PR_TAG
        - docker push $PACKAGE_REGISTRY/cli:latest$PR_TAG
    - name: "cli 8.0"
      script:
        - docker build --build-arg PACKAGE_REGISTRY=$PACKAGE_REGISTRY --build-arg PR_TAG=$PR_TAG -t $PACKAGE_REGISTRY/cli:8.0-fpm$PR_TAG images/8.0/cli
        - docker images
        - docker push $PACKAGE_REGISTRY/cli:8.0-fpm$PR_TAG

